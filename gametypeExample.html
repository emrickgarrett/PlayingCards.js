<html>
<head>
<title>Playing Cards Example</title>

<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="javascript/playingcards.js" type="text/javascript"></script>
<script src="javascript/gametemplate.js" type="text/javascript"></script>
<link rel="stylesheet" href="css/basecss.css">

</head>

<body>

	<div class="container">
		<h2> Playing Cards Game Example </h2>
		<h3 id="deal"> Deal! </h3>


		<div class="table">

		</div>
	</div>

<script type="text/javascript">

	//example of how to override the imagefiles
	var overriddenGetBackgroundImage = function(){
		return "uno-cards/card_back_alt.png";
	}

	cards.init({table: '.table', overrideCards: true});

	//you can create a gametype that overrides the base functionality of a deck! (images, deck size, etc, etc)
	//You can also set overrides for images here, or do it yourself in your function as shown for getImage
	gametypes.init(cards, null, {getImageBackgroundURLFunction: overriddenGetBackgroundImage}, function(options, allCards){
		var deckSize = 48;

		var getUnoImages = function(){
			var rank = this.rank;
			var suit = this.suit;

			switch(this.rank){
				case 10:
					rank = "p2";
				break;
				case 11:
					rank = "r";
				break;
				case 12:
					rank = "s";
				break;
			}

			return "uno-cards/" + suit + rank + ".png";
		}

		for(var i = 0; i < deckSize/4; i++){
			var cardB = new cards.Card('b', i, cards.options.table, true);
			var cardY = new cards.Card('y', i, cards.options.table, true);
			var cardR = new cards.Card('r', i, cards.options.table, true);
			var cardG = new cards.Card('g', i, cards.options.table, true);

			cardB.getCardImageURL = getUnoImages;
			cardY.getCardImageURL = getUnoImages;
			cardR.getCardImageURL = getUnoImages;
			cardG.getCardImageURL = getUnoImages;

			allCards.push(cardB.attach());
			allCards.push(cardY.attach());
			allCards.push(cardR.attach());
			allCards.push(cardG.attach());
		}
		var cardW1 = new cards.Card('w', "", cards.options.table, true);
		var cardW2 = new cards.Card('w', "p4", cards.options.table, true);

		cardW1.getCardImageURL = getUnoImages;
		cardW2.getCardImageURL = getUnoImages;

		allCards.push(cardW1.attach());
		allCards.push(cardW2.attach());
	});

	deck = new cards.Deck();

	deck.x -= 50;

	deck.addCards(cards.all);

	deck.render({immediate:true});

	upperhand = new cards.Hand({faceUp:false, y:60});
	lowerhand = new cards.Hand({faceUp:true, y:540});

	discardPile = new cards.Deck({faceUp:true});
	discardPile.x += 50;

	$("#deal").click(function(){
		$("#deal").hide();
		deck.deal(5, [upperhand, lowerhand], 50, function(){

			discardPile.addCard(deck.topCard());
			discardPile.render();
		});
	});

	deck.click(function(card){
		if(card === deck.topCard()){
			lowerhand.addCard(deck.topCard());
			lowerhand.render();
		}
	});

	lowerhand.click(function(card){
		if (card.suit == discardPile.topCard().suit || card.rank == discardPile.topCard().rank) {
			discardPile.addCard(card);
			discardPile.render();
			lowerhand.render();
		}
	});



	//gametype stuff here
	exampleGameType = new gametypes.GameType("Uno", cards, [], {});
	examplePlayer = new gametypes.Player(0, deck, discardPile, []);
	exampleGameMaster = new gametypes.GameMaster(cards, exampleGameType, [examplePlayer], {});

	exampleGameMaster.run();//will throw an error since this is default and not implemented!



</script>

</body>


</html>